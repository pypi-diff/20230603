# Comparing `tmp/ansible_playbook_grapher-2.0.0.dev0-py2.py3-none-any.whl.zip` & `tmp/ansible_playbook_grapher-2.0.0.dev2-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,19 +1,19 @@
-Zip file size: 50233 bytes, number of entries: 17
--rw-r--r--  2.0 unx     2831 b- defN 23-May-13 12:42 ansibleplaybookgrapher/__init__.py
+Zip file size: 50282 bytes, number of entries: 17
+-rw-r--r--  2.0 unx     2832 b- defN 23-May-28 10:41 ansibleplaybookgrapher/__init__.py
 -rw-r--r--  2.0 unx    11280 b- defN 23-May-13 12:42 ansibleplaybookgrapher/cli.py
 -rw-r--r--  2.0 unx    13757 b- defN 23-May-13 16:23 ansibleplaybookgrapher/graph_model.py
 -rw-r--r--  2.0 unx    19656 b- defN 23-May-13 12:42 ansibleplaybookgrapher/parser.py
 -rw-r--r--  2.0 unx     7014 b- defN 23-May-11 14:42 ansibleplaybookgrapher/utils.py
 -rw-r--r--  2.0 unx      358 b- defN 23-May-11 14:42 ansibleplaybookgrapher/data/graph.css
 -rw-r--r--  2.0 unx     5458 b- defN 23-May-11 14:42 ansibleplaybookgrapher/data/highlight-hover.js
 -rw-r--r--  2.0 unx     8189 b- defN 23-May-13 12:42 ansibleplaybookgrapher/renderer/__init__.py
--rw-r--r--  2.0 unx    11247 b- defN 23-May-13 16:22 ansibleplaybookgrapher/renderer/mermaid.py
--rw-r--r--  2.0 unx    11051 b- defN 23-May-13 12:42 ansibleplaybookgrapher/renderer/graphviz/__init__.py
+-rw-r--r--  2.0 unx    11304 b- defN 23-May-28 10:34 ansibleplaybookgrapher/renderer/mermaid.py
+-rw-r--r--  2.0 unx    11050 b- defN 23-May-28 10:34 ansibleplaybookgrapher/renderer/graphviz/__init__.py
 -rw-r--r--  2.0 unx     7367 b- defN 23-May-13 12:42 ansibleplaybookgrapher/renderer/graphviz/postprocessor.py
--rw-r--r--  2.0 unx    35148 b- defN 23-May-13 19:56 ansible_playbook_grapher-2.0.0.dev0.dist-info/LICENSE
--rw-r--r--  2.0 unx    27853 b- defN 23-May-13 19:56 ansible_playbook_grapher-2.0.0.dev0.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 23-May-13 19:56 ansible_playbook_grapher-2.0.0.dev0.dist-info/WHEEL
--rw-r--r--  2.0 unx       77 b- defN 23-May-13 19:56 ansible_playbook_grapher-2.0.0.dev0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       23 b- defN 23-May-13 19:56 ansible_playbook_grapher-2.0.0.dev0.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1687 b- defN 23-May-13 19:56 ansible_playbook_grapher-2.0.0.dev0.dist-info/RECORD
-17 files, 163106 bytes uncompressed, 47377 bytes compressed:  71.0%
+-rw-r--r--  2.0 unx    35148 b- defN 23-May-28 10:42 ansible_playbook_grapher-2.0.0.dev2.dist-info/LICENSE
+-rw-r--r--  2.0 unx    27854 b- defN 23-May-28 10:42 ansible_playbook_grapher-2.0.0.dev2.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 23-May-28 10:42 ansible_playbook_grapher-2.0.0.dev2.dist-info/WHEEL
+-rw-r--r--  2.0 unx       77 b- defN 23-May-28 10:42 ansible_playbook_grapher-2.0.0.dev2.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       23 b- defN 23-May-28 10:42 ansible_playbook_grapher-2.0.0.dev2.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1687 b- defN 23-May-28 10:42 ansible_playbook_grapher-2.0.0.dev2.dist-info/RECORD
+17 files, 163164 bytes uncompressed, 47426 bytes compressed:  70.9%
```

## zipnote {}

```diff
@@ -27,26 +27,26 @@
 
 Filename: ansibleplaybookgrapher/renderer/graphviz/__init__.py
 Comment: 
 
 Filename: ansibleplaybookgrapher/renderer/graphviz/postprocessor.py
 Comment: 
 
-Filename: ansible_playbook_grapher-2.0.0.dev0.dist-info/LICENSE
+Filename: ansible_playbook_grapher-2.0.0.dev2.dist-info/LICENSE
 Comment: 
 
-Filename: ansible_playbook_grapher-2.0.0.dev0.dist-info/METADATA
+Filename: ansible_playbook_grapher-2.0.0.dev2.dist-info/METADATA
 Comment: 
 
-Filename: ansible_playbook_grapher-2.0.0.dev0.dist-info/WHEEL
+Filename: ansible_playbook_grapher-2.0.0.dev2.dist-info/WHEEL
 Comment: 
 
-Filename: ansible_playbook_grapher-2.0.0.dev0.dist-info/entry_points.txt
+Filename: ansible_playbook_grapher-2.0.0.dev2.dist-info/entry_points.txt
 Comment: 
 
-Filename: ansible_playbook_grapher-2.0.0.dev0.dist-info/top_level.txt
+Filename: ansible_playbook_grapher-2.0.0.dev2.dist-info/top_level.txt
 Comment: 
 
-Filename: ansible_playbook_grapher-2.0.0.dev0.dist-info/RECORD
+Filename: ansible_playbook_grapher-2.0.0.dev2.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## ansibleplaybookgrapher/__init__.py

```diff
@@ -23,15 +23,15 @@
     PlayNode,
 )
 from ansibleplaybookgrapher.parser import PlaybookParser
 from ansibleplaybookgrapher.utils import merge_dicts
 from .graph_model import PlaybookNode, PlayNode, TaskNode, RoleNode, BlockNode
 from .parser import PlaybookParser
 
-__version__ = "2.0.0-dev"
+__version__ = "2.0.0-dev2"
 __prog__ = "ansible-playbook-grapher"
 
 display = Display()
 
 
 class Grapher:
     def __init__(self, playbook_filenames: List[str]):
```

## ansibleplaybookgrapher/renderer/mermaid.py

```diff
@@ -190,22 +190,17 @@
         :param task_node:
         :param color:
         :param fontcolor:
         :param kwargs:
         :return:
         """
         node_label_prefix = kwargs.get("node_label_prefix", "")
-        loop_icon = ""
-        if task_node.has_loop():
-            loop_icon = "fa:fa-repeat"
 
         # Task node
-        self.add_text(
-            f'{task_node.id}["{loop_icon} {node_label_prefix} {task_node.name}"]'
-        )
+        self.add_text(f'{task_node.id}["{node_label_prefix} {task_node.name}"]')
         self.add_text(f"style {task_node.id} stroke:{color},fill:{fontcolor}")
 
         # From parent to task
         self.add_link(
             source_id=task_node.parent.id,
             text=f"{task_node.index} {task_node.when}",
             dest_id=task_node.id,
@@ -217,47 +212,52 @@
 
         :param role_node:
         :param color:
         :param fontcolor:
         :param kwargs:
         :return:
         """
+        self.add_comment(f"Start of the role '{role_node.name}'")
 
-        # check if we already built this role
+        plays_using_this_role = len(self.roles_usage[role_node])
+        node_color = color
+        if plays_using_this_role > 1:
+            # If the role is used in multiple plays, we take black as the default color
+            node_color = "#000000"  # black
+
+        # From parent to role
+        self.add_link(
+            source_id=role_node.parent.id,
+            text=f"{role_node.index} {role_node.when}",
+            dest_id=role_node.id,
+            style=f"stroke:{color},color:{node_color}",
+        )
+
+        # Check if we already built this role
         if role_node in self.roles_built:
             return
+
         self.roles_built.add(role_node)
 
         # Role node
-        self.add_comment(f"Start of the role '{role_node.name}'")
-        loop_icon = ""
-        if role_node.has_loop():
-            loop_icon = "fa:fa-repeat"
-        self.add_text(f'{role_node.id}("{loop_icon} [role] {role_node.name}")')
+        self.add_text(f'{role_node.id}("[role] {role_node.name}")')
         self.add_text(
-            f"style {role_node.id} fill:{color},color:{fontcolor},stroke:{color}"
-        )
-
-        # from parent to role
-        self.add_link(
-            source_id=role_node.parent.id,
-            text=f"{role_node.index} {role_node.when}",
-            dest_id=role_node.id,
-            style=f"stroke:{color},color:{color}",
+            f"style {role_node.id} fill:{node_color},color:{fontcolor},stroke:{node_color}"
         )
 
-        # role tasks
+        # Role tasks
         self._identation_level += 1
         for role_task in role_node.tasks:
             self.build_node(
                 node=role_task,
-                color=color,
+                color=node_color,
                 fontcolor=fontcolor,
             )
         self._identation_level -= 1
+
         self.add_comment(f"End of the role '{role_node.name}'")
 
     def build_block(self, block_node: BlockNode, color: str, fontcolor: str, **kwargs):
         """
 
         :param block_node:
         :param color:
@@ -331,15 +331,15 @@
 
     def add_text(self, text: str):
         """
         Add a text to the mermaid diagram
         :param text:
         :return:
         """
-        self.mermaid_code += f"{self.indentation}{text}\n"
+        self.mermaid_code += f"{self.indentation}{text.strip()}\n"
 
     @property
     def indentation(self) -> str:
         """
         Return the current indentation level as tabulations
         :return:
         """
```

## ansibleplaybookgrapher/renderer/graphviz/__init__.py

```diff
@@ -217,41 +217,40 @@
 
     def build_role(self, role_node: RoleNode, color: str, fontcolor: str, **kwargs):
         """
         Render a role in the graph
         :return:
         """
 
-        # check if we already built this role
-        if role_node in self.roles_built:
-            return
-
-        self.roles_built.add(role_node)
-
         digraph = kwargs["digraph"]
 
-        if role_node.include_role:  # For include_role, we point to a file
-            url = self.get_node_url(role_node, "file")
-        else:  # For normal role invocation, we point to the folder
-            url = self.get_node_url(role_node, "folder")
-
         role_edge_label = f"{role_node.index} {role_node.when}"
-
         # from parent to the role node
         digraph.edge(
             role_node.parent.id,
             role_node.id,
             label=role_edge_label,
             color=color,
             fontcolor=color,
             id=f"edge_{role_node.index}_{role_node.parent.id}_{role_node.id}",
             tooltip=role_edge_label,
             labeltooltip=role_edge_label,
         )
 
+        # check if we already built this role
+        if role_node in self.roles_built:
+            return
+
+        self.roles_built.add(role_node)
+
+        if role_node.include_role:  # For include_role, we point to a file
+            url = self.get_node_url(role_node, "file")
+        else:  # For normal role invocation, we point to the folder
+            url = self.get_node_url(role_node, "folder")
+
         plays_using_this_role = self.roles_usage[role_node]
         if len(plays_using_this_role) > 1:
             # If the role is used in multiple plays, we take black as the default color
             role_color = "black"
             fontcolor = "#ffffff"
         else:
             role_color, fontcolor = list(plays_using_this_role)[0].colors
```

## Comparing `ansible_playbook_grapher-2.0.0.dev0.dist-info/LICENSE` & `ansible_playbook_grapher-2.0.0.dev2.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `ansible_playbook_grapher-2.0.0.dev0.dist-info/METADATA` & `ansible_playbook_grapher-2.0.0.dev2.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 Metadata-Version: 2.1
 Name: ansible-playbook-grapher
-Version: 2.0.0.dev0
+Version: 2.0.0.dev2
 Summary: A command line tool to create a graph representing your Ansible playbook tasks and roles
 Home-page: https://github.com/haidaraM/ansible-playbook-grapher
-Download-URL: https://github.com/haidaraM/ansible-playbook-grapher/archive/v2.0.0-dev.tar.gz
+Download-URL: https://github.com/haidaraM/ansible-playbook-grapher/archive/v2.0.0-dev2.tar.gz
 Author: HAIDARA Mohamed El Mouctar
 Author-email: elmhaidara@gmail.com
 License: MIT
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Intended Audience :: Developers
 Classifier: Intended Audience :: System Administrators
 Classifier: License :: OSI Approved :: GNU General Public License v3 (GPLv3)
```

## Comparing `ansible_playbook_grapher-2.0.0.dev0.dist-info/RECORD` & `ansible_playbook_grapher-2.0.0.dev2.dist-info/RECORD`

 * *Files 15% similar despite different names*

```diff
@@ -1,17 +1,17 @@
-ansibleplaybookgrapher/__init__.py,sha256=B4FWR0QtPTL9PMRt9tfJa5x_0HzpYF_pvHEHgO3bD2A,2831
+ansibleplaybookgrapher/__init__.py,sha256=DdSYT7s4hpuM2VhF45Hn2OGCZ6jGhfe4MFo4S6hqWvc,2832
 ansibleplaybookgrapher/cli.py,sha256=2Hr_9IilWO0tBU5bheXPukslamzwwxRKAMSl8fIaRm0,11280
 ansibleplaybookgrapher/graph_model.py,sha256=mlWmoJJCVDWLWqUSxVfqzzyqlQGR552Fa4i5ygVQX2s,13757
 ansibleplaybookgrapher/parser.py,sha256=wIrbgLopPWVw7QdhgeG9ojR-o-Wh75Yvy1aP0n2QmkU,19656
 ansibleplaybookgrapher/utils.py,sha256=zA-cqsZXQeDHtGKSQvE1VojufC-XUc3O6g9Z2stePsA,7014
 ansibleplaybookgrapher/data/graph.css,sha256=qavGSKdZrqaZYnRt9BfUQXLN65pK1iMA5KjsGm_nLDQ,358
 ansibleplaybookgrapher/data/highlight-hover.js,sha256=9uzi0vi4O2nq3OcJS-rKiqrEcGbXRZp0LkDmgKr4yls,5458
 ansibleplaybookgrapher/renderer/__init__.py,sha256=fhHpnesA4t8ERxGs67CupLBPw4a-9dnV5UtXk0TDPsY,8189
-ansibleplaybookgrapher/renderer/mermaid.py,sha256=1gcKlbuoaCPVxuDgrBI2F7zRnFWgyyQ-MIYLmleLNeY,11247
-ansibleplaybookgrapher/renderer/graphviz/__init__.py,sha256=u8GKqDPjW7Ae6FLLwh4KFXi6n0hHfx9MAIkEMcuD1yw,11051
+ansibleplaybookgrapher/renderer/mermaid.py,sha256=gkKBLRyh8PAW1C3fvlSLiDs1IKx5g-OFERlLVnJtTuw,11304
+ansibleplaybookgrapher/renderer/graphviz/__init__.py,sha256=DMn7VisId1mF3gvMpzQspuHtUTX6BSCB_osK_eKmJLE,11050
 ansibleplaybookgrapher/renderer/graphviz/postprocessor.py,sha256=pR_CFeXdaaKLFO0Y0GRMXqzmEvzh6ZZdAtvBbOFOgbo,7367
-ansible_playbook_grapher-2.0.0.dev0.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
-ansible_playbook_grapher-2.0.0.dev0.dist-info/METADATA,sha256=4Loogcn60FwOZ6jC7dMdM-4maQi0R2_J8uEq4wrBeOQ,27853
-ansible_playbook_grapher-2.0.0.dev0.dist-info/WHEEL,sha256=bb2Ot9scclHKMOLDEHY6B2sicWOgugjFKaJsT7vwMQo,110
-ansible_playbook_grapher-2.0.0.dev0.dist-info/entry_points.txt,sha256=wUiLaLPGWO72NzS8DzTseCcpF7ZC0IglJvrHwT5KXaI,77
-ansible_playbook_grapher-2.0.0.dev0.dist-info/top_level.txt,sha256=28v1PSNEaxaneuj2r3oh30LSAfAl_hlhNELiesTP6Ns,23
-ansible_playbook_grapher-2.0.0.dev0.dist-info/RECORD,,
+ansible_playbook_grapher-2.0.0.dev2.dist-info/LICENSE,sha256=ixuiBLtpoK3iv89l7ylKkg9rs2GzF9ukPH7ynZYzK5s,35148
+ansible_playbook_grapher-2.0.0.dev2.dist-info/METADATA,sha256=3MkxvIy-7HpaAILxdXg8IYgcTav3gcVO9DGTqzh1tvs,27854
+ansible_playbook_grapher-2.0.0.dev2.dist-info/WHEEL,sha256=bb2Ot9scclHKMOLDEHY6B2sicWOgugjFKaJsT7vwMQo,110
+ansible_playbook_grapher-2.0.0.dev2.dist-info/entry_points.txt,sha256=wUiLaLPGWO72NzS8DzTseCcpF7ZC0IglJvrHwT5KXaI,77
+ansible_playbook_grapher-2.0.0.dev2.dist-info/top_level.txt,sha256=28v1PSNEaxaneuj2r3oh30LSAfAl_hlhNELiesTP6Ns,23
+ansible_playbook_grapher-2.0.0.dev2.dist-info/RECORD,,
```

