# Comparing `tmp/read_rapidpe-0.5.3.tar.gz` & `tmp/read_rapidpe-0.5.4.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "read_rapidpe-0.5.3.tar", max compression
+gzip compressed data, was "read_rapidpe-0.5.4.tar", max compression
```

## Comparing `read_rapidpe-0.5.3.tar` & `read_rapidpe-0.5.4.tar`

### file list

```diff
@@ -1,11 +1,11 @@
--rw-r--r--   0        0        0     2399 2023-04-17 13:15:50.969962 read_rapidpe-0.5.3/README.md
--rw-r--r--   0        0        0      627 2023-06-01 09:59:41.474820 read_rapidpe-0.5.3/pyproject.toml
--rw-r--r--   0        0        0      303 2023-05-17 02:31:18.161235 read_rapidpe-0.5.3/read_rapidpe/__init__.py
--rw-r--r--   0        0        0    11295 2023-05-13 16:31:51.989559 read_rapidpe-0.5.3/read_rapidpe/grid_point.py
--rw-r--r--   0        0        0     3445 2023-05-16 05:02:30.343719 read_rapidpe-0.5.3/read_rapidpe/io.py
--rw-r--r--   0        0        0     6083 2023-04-16 13:20:01.614285 read_rapidpe-0.5.3/read_rapidpe/p_astro.py
--rw-r--r--   0        0        0     9718 2023-04-07 15:04:09.805939 read_rapidpe-0.5.3/read_rapidpe/parser.py
--rw-r--r--   0        0        0     1802 2023-05-17 02:28:36.535926 read_rapidpe-0.5.3/read_rapidpe/plot.py
--rw-r--r--   0        0        0    27219 2023-06-01 09:53:24.865061 read_rapidpe-0.5.3/read_rapidpe/result.py
--rw-r--r--   0        0        0     7203 2023-05-21 08:35:06.127055 read_rapidpe-0.5.3/read_rapidpe/transform.py
--rw-r--r--   0        0        0     3330 1970-01-01 00:00:00.000000 read_rapidpe-0.5.3/PKG-INFO
+-rw-r--r--   0        0        0     2399 2023-04-17 13:15:50.969962 read_rapidpe-0.5.4/README.md
+-rw-r--r--   0        0        0      627 2023-06-03 11:55:30.000242 read_rapidpe-0.5.4/pyproject.toml
+-rw-r--r--   0        0        0      303 2023-05-17 02:31:18.161235 read_rapidpe-0.5.4/read_rapidpe/__init__.py
+-rw-r--r--   0        0        0    11295 2023-05-13 16:31:51.989559 read_rapidpe-0.5.4/read_rapidpe/grid_point.py
+-rw-r--r--   0        0        0     3445 2023-05-16 05:02:30.343719 read_rapidpe-0.5.4/read_rapidpe/io.py
+-rw-r--r--   0        0        0     6083 2023-04-16 13:20:01.614285 read_rapidpe-0.5.4/read_rapidpe/p_astro.py
+-rw-r--r--   0        0        0     9718 2023-04-07 15:04:09.805939 read_rapidpe-0.5.4/read_rapidpe/parser.py
+-rw-r--r--   0        0        0     1802 2023-05-17 02:28:36.535926 read_rapidpe-0.5.4/read_rapidpe/plot.py
+-rw-r--r--   0        0        0    27705 2023-06-03 11:51:35.256470 read_rapidpe-0.5.4/read_rapidpe/result.py
+-rw-r--r--   0        0        0     8222 2023-06-02 21:48:32.317059 read_rapidpe-0.5.4/read_rapidpe/transform.py
+-rw-r--r--   0        0        0     3330 1970-01-01 00:00:00.000000 read_rapidpe-0.5.4/PKG-INFO
```

### Comparing `read_rapidpe-0.5.3/README.md` & `read_rapidpe-0.5.4/README.md`

 * *Files identical despite different names*

### Comparing `read_rapidpe-0.5.3/pyproject.toml` & `read_rapidpe-0.5.4/pyproject.toml`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "read-rapidpe"
-version = "0.5.3"
+version = "0.5.4"
 description = "Read and analyse results generated by rapidpe-rift-pipe"
 authors = ["Cory Chu <cory@gwlab.page>"]
 readme = "README.md"
 packages = [{include = "read_rapidpe"}]
 homepage = "https://github.com/c0rychu/read-rapidpe"
 repository = "https://git.ligo.org/yu-kuang.chu/read-rapidpe"
```

### Comparing `read_rapidpe-0.5.3/read_rapidpe/grid_point.py` & `read_rapidpe-0.5.4/read_rapidpe/grid_point.py`

 * *Files identical despite different names*

### Comparing `read_rapidpe-0.5.3/read_rapidpe/io.py` & `read_rapidpe-0.5.4/read_rapidpe/io.py`

 * *Files identical despite different names*

### Comparing `read_rapidpe-0.5.3/read_rapidpe/p_astro.py` & `read_rapidpe-0.5.4/read_rapidpe/p_astro.py`

 * *Files identical despite different names*

### Comparing `read_rapidpe-0.5.3/read_rapidpe/parser.py` & `read_rapidpe-0.5.4/read_rapidpe/parser.py`

 * *Files identical despite different names*

### Comparing `read_rapidpe-0.5.3/read_rapidpe/plot.py` & `read_rapidpe-0.5.4/read_rapidpe/plot.py`

 * *Files identical despite different names*

### Comparing `read_rapidpe-0.5.3/read_rapidpe/result.py` & `read_rapidpe-0.5.4/read_rapidpe/result.py`

 * *Files 2% similar despite different names*

```diff
@@ -110,14 +110,29 @@
 
     def __getitem__(self, key):
         """
         Get res.attr by res["attr"]
         """
         return getattr(self, key)
 
+    @cached_property
+    def _x(self):
+        x = Mass_Spin.from_m1m2(self.mass_1,
+                                self.mass_2,
+                                grid_coordinates=self.grid_coordinates)
+        return x
+
+    @cached_property
+    def x1(self):
+        return self._x.x1
+
+    @cached_property
+    def x2(self):
+        return self._x.x2
+
     @property
     def grid_coordinates(self):
         """
         List of grid coordinates in wich the grid points are rectilinear
         """
         iparam_search = self.config_info["intrinsic_param_to_search"]
         distant_coord = self.config_info["distance_coordinates"]
@@ -222,14 +237,15 @@
 
     @classmethod
     def from_run_dir(cls,
                      run_dir,
                      use_numpy=True,
                      use_ligolw=True,
                      extrinsic_table=True,
+                     load_results=True,
                      parallel_n=1):
         """
         Get result from a Rapid-PE run_dir
 
         Example
         -------
             result = RapidPE_result.from_run_dir("path/to/run_dir")
@@ -243,22 +259,26 @@
             Whether using ligo.lw to read xml files
 
         extrinsic_table : bool
             Whether loading extrinsic_table as well
 
         """
         run_dir = Path(run_dir)
-        results_dir = Path(run_dir)/Path("results")
-        xml_array = [f.as_posix() for f in sorted(results_dir.glob("*.xml.gz"))]  # noqa: E501
 
-        result = cls.from_xml_array(xml_array,
-                                    use_numpy=use_numpy,
-                                    use_ligolw=use_ligolw,
-                                    extrinsic_table=extrinsic_table,
-                                    parallel_n=parallel_n)
+        if load_results:
+            results_dir = Path(run_dir)/Path("results")
+            xml_array = [f.as_posix() for f in sorted(results_dir.glob("*.xml.gz"))]  # noqa: E501
+
+            result = cls.from_xml_array(xml_array,
+                                        use_numpy=use_numpy,
+                                        use_ligolw=use_ligolw,
+                                        extrinsic_table=extrinsic_table,
+                                        parallel_n=parallel_n)
+        else:
+            result = cls()
 
         event_info_dict_txt = run_dir / "event_info_dict.txt"
         injection_info_txt = run_dir / "injection_info.txt"
         config_ini = run_dir/"Config.ini"
 
         try:
             result.event_info = load_event_info_dict_txt(event_info_dict_txt)
```

### Comparing `read_rapidpe-0.5.3/read_rapidpe/transform.py` & `read_rapidpe-0.5.4/read_rapidpe/transform.py`

 * *Files 10% similar despite different names*

```diff
@@ -109,28 +109,38 @@
     @property
     def x1x2(self):
         x1 = self[self.grid_coordinates[0]]
         x2 = self[self.grid_coordinates[1]]
         return x1, x2
 
     @property
+    def x1(self):
+        x1 = self[self.grid_coordinates[0]]
+        return x1
+
+    @property
+    def x2(self):
+        x2 = self[self.grid_coordinates[1]]
+        return x2
+
+    @property
     def mass_1(self):
         return self._mass_1
 
     @mass_1.setter
     def mass_1(self, value):
         self._mass_1 = value
 
     @property
     def mass_2(self):
-        return self._mass_1
+        return self._mass_2
 
     @mass_2.setter
     def mass_2(self, value):
-        self._mass_1 = value
+        self._mass_2 = value
 
     @property
     def chirp_mass(self):
         chirp_mass = self.m1m2_to_mc(self._mass_1, self._mass_2)
         return chirp_mass
 
     @property
@@ -202,14 +212,15 @@
         q = cls.m1m2_to_q(m1, m2)
         return mc, q
 
     @classmethod
     def m1m2_to_q(cls, m1, m2):
         """
         Compute mass ratio from component masses
+        q = m2/m1, where m1 >= m2
         """
         q = np.minimum(m1, m2) / np.maximum(m1, m2)
         return q
 
     @classmethod
     def m1m2_to_mc(cls, m1, m2):
         """
@@ -222,31 +233,48 @@
     def m1m2_to_eta(cls, m1, m2):
         """
         Compute symmetric mass ratio from component masses
         """
         eta = m1*m2 / (m1+m2)**2
         return eta
 
+    @classmethod
+    def jacobian_m1m2_by_mceta(cls, mc, eta):
+        """
+        Return the Jacobian (m1, m2)/(mc, eta)
+        """
+        assert np.all(mc > 0), "chirp_mass (Mc) should > 0"
+        assert np.all(eta > 0), "symmetric_mass_ratio (eta) should > 0"
+        assert np.all(eta <= 0.25), "symmetric_mass_ratio (eta) should <= 0.25"
 
-def jacobian_m1m2_by_mceta(mc, eta):
-    """
-    return the Jacobian (m1, m2)/(mc, eta)
-    """
-    assert np.all(mc > 0), "chirp_mass (Mc) should > 0"
-    assert np.all(eta > 0), "symmetric_mass_ratio (eta) should > 0"
-    assert np.all(eta <= 0.25), "symmetric_mass_ratio (eta) should <= 0.25"
+        return mc / (np.sqrt(1. - 4.*eta) * eta**1.2)  # 6/5 = 1.2
 
-    return mc / (np.sqrt(1. - 4.*eta) * eta**1.2)  # 6/5 = 1.2
+    @classmethod
+    def jacobian_mceta_by_m1m2(cls, m1, m2):
+        """
+        Return the Jacobian (mc, eta)/(m1, m2)
+        """
+        return (m1-m2)*(m1*m2)**0.6 / (m1+m2)**3.2  # 3/5 = 0.6, 16/5 = 3.2
 
+    @classmethod
+    def jacobian_m1m2_by_mcq(cls, mc, q):
+        """
+        Return the Jacobian (m1, m2)/(mc, q)
+        """
+        assert np.all(mc > 0), "chirp_mass (Mc) should > 0"
+        assert np.all(q > 0), "mass_ratio (q) should > 0"
 
-def jacobian_mceta_by_m1m2(m1, m2):
-    """
-    return the Jacobian (mc, eta)/(m1, m2)
-    """
-    return (m1-m2)*(m1*m2)**0.6 / (m1+m2)**3.2  # 3/5 = 0.6, 16/5 = 3.2
+        return mc * (1+q)**0.4 / q**1.2  # 2/5 = 0.4, 6/5 = 1.2
+
+    @classmethod
+    def jacobian_mcq_by_m1m2(cls, m1, m2):
+        """
+        Return the Jacobian (mc, q)/(m1, m2)
+        """
+        return (m1*m2)**0.6 / (m1**2 * (m1+m2)**0.2)  # 3/5 = 0.6, 1/5 = 0.2
 
 
 # =====================================================================
 # For legacy support
 # =====================================================================
 
 
@@ -254,8 +282,16 @@
     return Mass_Spin.m1m2_to_mceta(m1, m2)
 
 
 def transform_mceta_to_m1m2(mc, eta):
     return Mass_Spin.mceta_to_m1m2(mc, eta)
 
 
+def jacobian_m1m2_by_mceta(mc, eta):
+    return Mass_Spin.jacobian_m1m2_by_mceta(mc, eta)
+
+
+def jacobian_mceta_by_m1m2(m1, m2):
+    return Mass_Spin.jacobian_mceta_by_m1m2(m1, m2)
+
+
 # =====================================================================
```

### Comparing `read_rapidpe-0.5.3/PKG-INFO` & `read_rapidpe-0.5.4/PKG-INFO`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: read-rapidpe
-Version: 0.5.3
+Version: 0.5.4
 Summary: Read and analyse results generated by rapidpe-rift-pipe
 Home-page: https://github.com/c0rychu/read-rapidpe
 Author: Cory Chu
 Author-email: cory@gwlab.page
 Requires-Python: >=3.8,<4.0
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.8
```

